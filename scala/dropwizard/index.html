<!DOCTYPE html><html><head><title>guardrail: dropwizard - scala - guardrail</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Twilio" /><meta name="description" content="Principled code generation from OpenAPI specifications" /><meta name="og:image" content="/img/poster.png" /><meta name="image" property="og:image" content="/img/poster.png" /><meta name="og:title" content="guardrail: dropwizard - scala - guardrail" /><meta name="title" property="og:title" content="guardrail: dropwizard - scala - guardrail" /><meta name="og:site_name" content="guardrail" /><meta name="og:url" content="" /><meta name="og:type" content="website" /><meta name="og:description" content="Principled code generation from OpenAPI specifications" /><link rel="icon" type="image/png" href="/img/favicon.png" /><meta name="twitter:title" content="guardrail: dropwizard - scala - guardrail" /><meta name="twitter:image" content="https://guardrail.dev//img/poster.png" /><meta name="twitter:description" content="Principled code generation from OpenAPI specifications" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:site" content="@guardrail_code" /><meta name="twitter:creator" content="@twilio" /><link rel="icon" type="image/png" sizes="16x16" href="/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/highlight/styles/vs.css" /><link rel="stylesheet" href="/css/pattern-style.css" /><script async="async">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-154175369-1' , 'auto');
ga('send', 'pageview');
      </script></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/" class="brand"><div class="brand-wrapper"><span>guardrail</span></div></a></li> <li><a href="/" class="">Getting Started</a></li> <li><a href="/java/" class="">Java</a> <ul class="sub-section"> <li><a href="/java/dropwizard/" class="">Dropwizard</a></li> <li><a href="/java/spring-mvc/" class="">Spring-MVC</a></li></ul></li> <li><a href="/scala/" class="">Scala</a> <ul class="sub-section"> <li><a href="/scala/akka-http" class="">akka-http</a></li> <li><a href="/scala/akka-http-jackson" class="">akka-http-jackson</a></li> <li><a href="/scala/http4s" class="">http4s</a></li></ul></li> <li><a href="/scalajs/" class="">ScalaJS</a> <ul class="sub-section"> <li><a href="/scalajs/endpoints" class="">endpoints (client only)</a></li></ul></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li class="search-nav hidden-xs hidden-sm"><div id="search-dropdown"><label><i class="fa fa-search"></i>Search</label><input id="search-bar" type="text" placeholder="Enter keywords here..." onclick="displayToggleSearch(event)" /><ul id="search-dropdown-content" class="dropdown dropdown-content"></ul></div></li><li id="gh-eyes-item" class="hidden-xs to-uppercase"><a href="https://github.com/guardrail-dev/guardrail" target="_blank" rel="noopener noreferrer"><i class="fa fa-eye"></i><span>Watchers<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs to-uppercase"><a href="https://github.com/guardrail-dev/guardrail" target="_blank" rel="noopener noreferrer"><i class="fa fa-star-o"></i><span>Stars<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('guardrail Principled code generation from OpenAPI specifications');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('guardrail Principled code generation from OpenAPI specifications');"><i class="fa fa-facebook"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="guardrail-dev" data-github-repo="guardrail"><div class="content-wrapper"><section><p>The <code class="highlighter-rouge">dropwizard</code> framework generates Scala code for Dropwizard, using
Jackson for serialization.</p>

<h2 id="server-generation">Server Generation</h2>

<h3 id="prerequisites">Prerequisites</h3>

<p>In addition to standard Dropwizard dependencies, you’ll need:</p>

<ul>
  <li><code class="highlighter-rouge">io.dropwizard:dropwizard-forms</code></li>
  <li><code class="highlighter-rouge">com.datasift.dropwizard.scala:dropwizard-scala-core</code></li>
  <li><code class="highlighter-rouge">com.fasterxml.jackson.datatype:jackson-datatype-jsr310</code></li>
  <li><code class="highlighter-rouge">com.fasterxml.jackson.module:jackson-module-scala_${scala.compat.version}</code></li>
  <li><code class="highlighter-rouge">org.typelevel:cats-core_${scala_binary_version}</code></li>
</ul>

<p>The <code class="highlighter-rouge">ScalaBundle</code> from <code class="highlighter-rouge">dropwizard-scala</code> should be added in your
application’s <code class="highlighter-rouge">initialize()</code> method using <code class="highlighter-rouge">bootstrap.addBundle()</code>.</p>

<p>For each resource generated by guardrail, you’ll need to register it
with Jersey in your application’s <code class="highlighter-rouge">run()</code> method using
<code class="highlighter-rouge">environment.jersey.register()</code>.</p>

<h3 id="usage">Usage</h3>

<p>Server usage follows the same pattern as the Scala
<a href="../akka-http">akka-http</a> framework.  You must implement a <code class="highlighter-rouge">Handler</code>
class for each resource.  Each handler method takes a <code class="highlighter-rouge">respond</code>
parameter, which allows you to easily construct response instances, plus
all parameters specified for the method’s underlying operation.  The
handler should be passed to the resource class upon construction.</p>

<h3 id="custom-types">Custom Types</h3>

<p>If you need to use a custom type in any guardrail-generated code (via
<code class="highlighter-rouge">x-scala-type</code> or <code class="highlighter-rouge">x-jvm-type</code>), you’ll need to provide implicit
<code class="highlighter-rouge">GuardrailEncoder</code>, <code class="highlighter-rouge">GuardrailDecoder</code>, and <code class="highlighter-rouge">GuardrailValidator</code>
instances.  Usually something like this is all that’s required:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">implicit</span> <span class="k">val</span> <span class="nv">encodeMyType</span><span class="k">:</span> <span class="kt">GuardrailEncoder</span><span class="o">[</span><span class="kt">MyType</span><span class="o">]</span> <span class="k">=</span> <span class="nv">GuardrailEncoder</span><span class="o">.</span><span class="py">instance</span>
<span class="k">implicit</span> <span class="k">val</span> <span class="nv">decodeMyType</span><span class="k">:</span> <span class="kt">GuardrailDecoder</span><span class="o">[</span><span class="kt">MyType</span><span class="o">]</span> <span class="k">=</span> <span class="nv">GuardrailDecoder</span><span class="o">.</span><span class="py">instance</span><span class="o">(</span><span class="k">new</span> <span class="nc">TypeReference</span><span class="o">&lt;</span><span class="nc">MyType</span><span class="o">&gt;()</span> <span class="o">{})</span>
<span class="k">implicit</span> <span class="k">val</span> <span class="nv">validateMyType</span><span class="k">:</span> <span class="kt">GuardrailValidator</span><span class="o">[</span><span class="kt">MyType</span><span class="o">]</span> <span class="k">=</span> <span class="nv">GuardrailValidator</span><span class="o">.</span><span class="py">instance</span>
</code></pre></div></div>

<p>If your type does not work properly with validation for some reason, you
can instead use <code class="highlighter-rouge">GuardrailValidator.noop</code>.</p>

<p>Your custom implicits can be imported by adding a <code class="highlighter-rouge">customImport</code> to your
guardrail configuration.  See the specific plugin documentation for more
information.</p>

<h3 id="handling-errors">Handling Errors</h3>

<p>Dropwizard, Jersey, and Jackson do their own validation of input
parameters.  If validation fails, the resource class method will never
be called, and Dropwizard will return a 4xx error with a generic
response body.  We recommended that you define response codes in your
guardrail spec to signal this possibility, and implement and register a
Dropwizard <code class="highlighter-rouge">ExceptionMapper</code> that outputs response bodies that conform
to your spec.  In particular, you’ll want to look out for
<code class="highlighter-rouge">IllegalArgumentException</code>, <code class="highlighter-rouge">ValidationException</code>, and subclasses of
<code class="highlighter-rouge">WebApplicationException</code> that signal 4xx response codes (however, there
may be other exceptions thrown).</p>

<p>Similarly, Dropwizard can return 5xx responses when the server is
overloaded or if there is some other issue.  Again, we recommended you
specify and handle this properly by including those response codes in
your spec, and handling the appropriate exceptions in your exception
mapper.</p>

<p>We recommend that you avoid throwing exceptions to signal errors, and
instead carefully define expected error response codes in your spec.
From there, you can use the <code class="highlighter-rouge">respond</code> parameter passed to your handler
methods to return errors of the proper form.  The generated resource
methods do handle failed <code class="highlighter-rouge">Future</code>s in that they return a generic 500
error with no response body, but that is likely not what your API
clients will expect.</p>

<h2 id="client-generation">Client Generation</h2>

<p>Client generation is not yet implemented.</p>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/highlight/highlight.pack.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/yaml.min.js"></script><script src="/lunr/lunr.js"></script><script>
// For all code blocks, copy the language from the containing div
// to the inner code tag (where hljs expects it to be)
const langPrefix = 'language-';
document.querySelectorAll(`div[class^='${langPrefix}']`).forEach(function(div) {
  div.classList.forEach(function(cssClass) {
    if (cssClass.startsWith(langPrefix)) {
      const lang = cssClass.substring(langPrefix.length);
      div.querySelectorAll('pre code').forEach(function(code) {
        code.classList.add(lang);
      });
    }
  });
});

hljs.configure({languages:['scala','java','bash','yaml','scala']});
hljs.initHighlightingOnLoad();
      </script><script>console.info('\x57\x65\x62\x73\x69\x74\x65\x20\x62\x75\x69\x6c\x74\x20\x77\x69\x74\x68\x3a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x5f\x5f\x0a\x20\x20\x20\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x5f\x20\x20\x2f\x20\x2f\x5f\x20\x20\x20\x20\x20\x20\x5f\x5f\x5f\x5f\x20\x5f\x5f\x5f\x20\x20\x28\x5f\x29\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x28\x5f\x29\x20\x2f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x0a\x20\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x60\x5f\x5f\x20\x5c\x2f\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x20\x2f\x20\x5f\x5f\x2f\x20\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x0a\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x5f\x2f\x20\x2f\x20\x2f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x5f\x5f\x2f\x20\x2f\x20\x20\x2f\x20\x2f\x5f\x2f\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x20\x2f\x5f\x2f\x20\x20\x5f\x5f\x28\x5f\x5f\x20\x20\x29\x0a\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2e\x5f\x5f\x5f\x2f\x5c\x5f\x5f\x2f\x20\x20\x20\x20\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x2f\x20\x20\x20\x5c\x5f\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x0a\x0a\x68\x74\x74\x70\x73\x3a\x2f\x2f\x34\x37\x64\x65\x67\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f\x2f\x73\x62\x74\x2d\x6d\x69\x63\x72\x6f\x73\x69\x74\x65\x73')</script><script src="/js/search.js"></script><script src="/js/main.js"></script></body></html>